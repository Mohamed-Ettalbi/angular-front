<div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort class="tickets-table mat-elevation-z8">
      
      <!-- ID Column -->
      <ng-container matColumnDef="ticketId">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> ID </th>
        <td mat-cell *matCellDef="let ticket"> {{ticket.ticketId}} </td>      
      </ng-container>
  
      <!-- Title Column -->
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef sticky> Title </th>
        <td mat-cell *matCellDef="let ticket"> 
          <a [routerLink]="['/tickets', ticket.ticketId]">{{ ticket.title }}</a>  
        </td>
      </ng-container>
  
      <!-- Category Column -->
      <ng-container matColumnDef="ticketCategoryName">
        <th mat-header-cell *matHeaderCellDef sticky> Category </th>
        <td mat-cell *matCellDef="let ticket"> {{ticket.ticketCategoryName}} </td>
      </ng-container>
  
      <!-- Priority Column -->
      <ng-container matColumnDef="priority">
        <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Priority </th>
        <td mat-cell *matCellDef="let ticket"> {{ticket.priority}} </td>
      </ng-container>
  
      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef  sticky> Status </th>
        <td mat-cell *matCellDef="let ticket"> 
            <mat-form-field appearance="fill">
                <mat-label>Status</mat-label>
                <mat-select [value]="ticket.status" (selectionChange)="setStatus(ticket.ticketId, $event.value)">
                  <mat-option value="OPEN">Open</mat-option>
                  <mat-option value="IN_PROGRESS">In Progress</mat-option>
                  <mat-option value="CLOSED">Closed</mat-option>
                </mat-select>
              </mat-form-field>
        </td>
      </ng-container>
      <!-- Assinged to by email-->
      <ng-container matColumnDef="AssignedTO">
        <th mat-header-cell *matHeaderCellDef  sticky> Technician </th>
        <td mat-cell *matCellDef="let ticket">  {{ticket.assignedTo}} </td>      
      </ng-container>
  
      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef sticky> Actions </th>
        <td mat-cell *matCellDef="let ticket">
          <button *ngIf="role==='ROLE_ADMIN'"mat-stroked-button (click)="editTicket(ticket.ticketId)">Edit</button>
          <button *ngIf="role==='ROLE_ADMIN'" mat-stroked-button color="warn" (click)="deleteTicket(ticket.ticketId)">Delete</button>
          <button *ngIf="role==='ROLE_ADMIN'" mat-stroked-button color="primary" (click)="assignTicket(ticket.ticketId)">Assign</button>
          <button *ngIf="role==='ROLE_ADMIN'" mat-stroked-button color="primary" (click)="unAssignTicket(ticket.ticketId)">UnAssign</button>

          <button *ngIf="role==='ROLE_TECHNICIAN'" mat-stroked-button color="primary" (click)="takeTicket(ticket.ticketId)">Take On</button>

          
        </td>
      </ng-container>

  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  
    </table>
    
    <mat-paginator class="paginator-container mat-elevation-z8"
      [length]="dataSource.data.length"
      [pageSize]="5"
      [pageSizeOptions]="[5, 10, 20]">
    </mat-paginator>
  </div>
  